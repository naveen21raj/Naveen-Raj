(function(a){var b=window.AmazonUIPageJS||window.P,f=b._namespace||b.attributeErrors,c=f?f("AmazonGatewayAuiAssets"):b;c.guardFatal?c.guardFatal(a)(c,window):c.execute(function(){a(c,window)})})(function(a,b,f){a.when("A").register("sg-jsutil",function(a){var b=a.$;return{safeCall:function(a,c){return b.isFunction(a)?a(c):c}}});a.when("A","load").execute("ah-inst-img-size",function(c){function k(e){if(!e)return null;var g=d(e).attr("src");e=d(e).data("a-hires");return g===e?null:g}function f(d){"object"===
typeof t.ue&&"function"===typeof t.ue.count&&t.ue&&t.ue.count(d,(t.ue.count(d)||0)+1)}function l(e,g){f("gw-img-size-invoke");d.ajax({type:"HEAD",async:!0,url:e,success:function(d,e,a){f("gw-img-size-success");c.trigger(g,parseInt(a.getResponseHeader("Content-Length"),10))},error:function(d,e,g){f("gw-img-size-error")}})}function h(e,g){0<e.length&&(q[g]={count:e.length,totalSize:0,images:d.unique(e)},d(q[g].images).each(function(d,e){var a=g+"_"+d;c.on(a,function(d){isNaN(d)||(--q[g].count,q[g].totalSize+=
d,0===q[g].count&&t.ue&&t.ue.count(g,q[g].totalSize))});l(e,a)}))}function m(d,e){var a=c.$(d);(a=0>=a.length?null:k(a[0]))&&h([a],e)}function e(e,g){g=g||e.length;var a=[];d(e.slice(0,g)).each(function(d,e){var g=k(e);if(!g)return[];a.push(g)});return a}var d=c.$,t=b,q=[];a.execute("inst-cf-img",function(){f("gw-inst-img");m(".gw-critical-content img","gw-cf-img-size")});a.when("x1").execute("inst-x1-img",function(){a.execute("inst-x1-rec-img",function(){var a=1;d("#gw-content-grid .feed-carousel .feed-carousel-shelf").slice(0,
2).each(function(g,b){if(2>=a){var c="gw-shoveler-img-size-"+a++,m=d(b).find("img");6<=m.length&&(m=e(m,6),h(m,c))}})});a.execute("inst-x1-unrec-img",function(){h(e(c.$("#desktop-unrec-col-1 img")),"gw-unrec-col-1-img-size");h(e(c.$("#desktop-unrec-col-2 img")),"gw-unrec-col-2-img-size");h(e(c.$("#desktop-unrec-col-3 img")),"gw-unrec-col-3-img-size");m("#desktop-unrec-sidekick #dotd-image img","gw-unrec-sidekick-img-size")})})});a.when("A").register("dombinder",function(a){function b(a,
e){var d=0;e=e.split(".");for(var c=e.length;d<c;d++)a=a&&a[e[d]];return a}function f(a){return l.map(l(a).data("bind").split(","),function(e){e=e.split(":");var d=l.trim(e[0]),b=l.trim(e[1]),c=h[d];if(c)return c.init&&c.init(a,b),function(d){c.update(a,b,d)}})}var l=a.$,h={text:{update:function(a,e,d){l(a).text(b(d,e)||"")}},html:{update:function(a,e,d){l(a).html(b(d,e)||"")}},href:{update:function(a,e,d){l(a).attr("href",b(d,e)||"")}},trimText:{update:function(a,e,d){a=l(a);d=a.text();if(d.length>
e){for(var b=e-4;0<=b&&0<"[.,-/#!$%^&*;:{}=-_`~()] ".indexOf(d[b]);)b--;a.text(d.substring(0,0<=b?b+1:e-3)+"...")}}},value:{update:function(a,e,d){l(a).val(b(d,e)||"")}},visible:{update:function(a,e,d){var c=!1;"!"===e.charAt(0)&&(c=!0,e=e.substring(1));e=!!b(d,e);c!==e?l(a).show():l(a).hide()}},css:{init:function(a,e){var d=l(a),b=d.data("dombcss")||[];b[e]="";d.data("dombcss",b)},update:function(a,e,d){a=l(a);var c=a.data("dombcss"),h=c[e];d=b(d,e);h!==d&&(c[e]=d,h&&a.removeClass(h),d&&a.addClass(d))}},
attr:{init:function(a,e){var d=l(a),b=d.data("dombattr")||[];b[e]={};d.data("dombattr",b)},update:function(a,e,d){var c=l(a);a=c.data("dombattr");var h=a[e];d=b(d,e);h!==d&&(a[e]=d,h&&l.each(h,function(d,e){c.removeAttr(d)}),d&&l.each(d,function(d,e){c.attr(d,e)}))}}};return{init:function(a){var e={$root:a,bindings:[]};a.find("[data-bind]").each(function(){l.each(f(this),function(d,a){e.bindings.push(a)})});return e},update:function(a,e){l.each(a.bindings,function(d,a){a(e)})}}});a.when("jQuery").register("gwAjax",
function(a){return function(k,f){function l(d,a,c){"object"===typeof b.ue&&"function"===typeof b.ue.count&&(h(f.errorCounter||"gwAjaxError"),f.id&&h("gwAjaxError:"+f.id));"function"===typeof b.ueLogError&&b.ueLogError({logLevel:"WARN",attribution:"gwAjax-"+(f.id||k),message:"gwAjax call failed "+(JSON&&JSON.stringify?JSON.stringify({url:k,"params-data":f.params||f.data}):"")});"function"===typeof e&&e(d,a,c)}function h(d){"object"===typeof b.ue&&"function"===typeof b.ue.count&&b.ue.count(d,(b.ue.count(d)||
0)+1)}f=a.extend(!0,{},f);var m=f.success,e=f.error;f.success=function(d,e,a){d.error?l(d,e,a):"function"===typeof m&&m(d,e,a)};f.error=l;f.data=f.params?f.params:f.data;h("gwAjaxCall");f.ajaxCounter&&h(f.ajaxCounter);return a.ajax(k,f)}});a.when("jQuery","gw-hud-punt").execute("gw-hud-sidekick",function(a){a("#gw-hud-grid").css({display:"none"})});a.when("A","sg-jsutil","a-modal","gw-productdb","productdb-binding-helper","sg-media-builder","gw-sims","gw-popover-data").register("gw-popover",
function(c,k,f,l,h,m,e,d){function t(d,e){b.uet&&b.uet(d,e,{wb:1})}function q(d){if(b.ue&&"function"===typeof b.ue.count)return b.ue.count(d)||0}function p(d){b.ue&&"function"===typeof b.ue.count&&b.ue.count(d,(b.ue.count(d)||0)+1)}function g(d){return d.closest("*[data-sgproduct]").data("sgproduct")}function w(d,e){A[d.asin]&&A[d.asin].isResolved()?B.resetSimData():(A[d.asin]=r.Deferred(),d&&d.asin&&e?B.fetch(d,e,A[d.asin]):A[d.asin].reject())}var r=c.$,y={},A={};if(!r("html").hasClass("a-touch")){k=
r('<span style="display: none" />').appendTo("body");var v=r("#gw-popover-wrapper"),u=new h(l,v),z=f.create(k,{name:"gw-asin-popover",width:"90%","max-width":900,height:590,popoverLabel:d.popoverLabel,closeButton:!1}),B=new e(u),D=r("#gw-quick-look-btn");r("#a-page").delegate("li[data-sgproduct]","mouseenter",function(d){r(d.currentTarget).append(D);r(d.currentTarget).find("[title]").removeAttr("title");D.addClass("active")});D.mouseenter(function(){var d=r(this),e=g(d),d=d.siblings().children("a").attr("href");
w(e,d)});r(".bestsellers .listRow a").mouseenter(function(){var d=r(this),e=g(d),d=d.attr("href");w(e,d);!e||!e.asin||y[e.asin]&&y[e.asin].isResolved()||!(d=l.get(e.asin))||(y[e.asin]=r.Deferred(),y[e.asin].resolve(d))});a.when("gwAjax").execute(function(d){var e={};r("#a-page").delegate(".fresh-shoveler li[data-sgproduct]","mouseenter mousemove",function(g){g=r(g.currentTarget);var a=g.data("sgproduct").asin;if(!y[a]||!y[a].isResolved()){var k=[];g.add(g.prev("li[data-sgproduct]")).add(g.next("li[data-sgproduct]")).each(function(){var d=
r(this).data("sgproduct");if(d&&d.asin){var g=l.get(d.asin),a=(g=!(!e[d.asin]&&g&&g.loading))&&1500<c.now()-e[d.asin];if(!g||a)k.push(d.asin),e[d.asin]=c.now()}});y[a]=r.Deferred();k.length?(d("/gp/gw/ajax/pdb.html",{id:"quicklook-pdb",data:{swn:"productdb-ajax",sa:'{"asins": ["'+k.join('","')+'"]}',oe:'{"isDesktop":1,"isTablet":0,"isMobile":0}',rrid:b.ue_id}}).done(function(d){l._add(d);for(var g=0;g<k.length;g++)e[k[g]]=Infinity;y[a].resolve(d)}).fail(y[a].reject),p("freshHoverCount")):y[a].resolve()}})});
r("#a-page").delegate("li[data-sgproduct]","mouseleave",function(d){D.removeClass("active")});var C="#a-popover-"+z.attrs("id")+" ";f=r.map([".a-popover-header { display: none; }",".a-popover-inner { padding: 0px !important; margin: 0px !important; overflow: hidden !important; height: 100% !important; }"],function(d){return C+d}).join(" ");r("head").append("<style>"+f+"</style>");c.on("a:popover:hide:gw-asin-popover",function(d){b.history.state&&b.history.state.popup&&b.history.back();u.clear()});
r(b).bind("popstate",function(){z.hide()});return{show:function(d,e){p("freshPopOverOn");t("bb","popoverLatency"+q("freshPopOverOn"));b.history&&b.history.pushState&&b.history.pushState({popup:1},"");u.setAsin(d,{beforeUpdate:function(g){if(g.loading)return p("freshPopOverLoading"),g;var a=(new m(g.images[0])).autoCrop().scaleXY(500,400).build(),a={url:e,image:a,actionUrl:{action:"/gp/product/handle-buy-box/"+function(d){return d.substring(d.indexOf("/ref=")+1,d.length)}(e)}};g.reviews&&(a.reviews=
r.extend({},g.reviews,{url:e+"#customerReviews"}));r.when(A[d],y[d]).done(function(e,g){B.showSims(d,e)});A[d].fail(B.setNoSimView);t("cf","popoverLatency"+q("freshPopOverOn"));return r.extend({},g,a)}});z.show()},hide:function(){z.hide()}}}});a.when("A","sg-media-builder","gw-productdb").register("gw-sims",function(c,k,f){var l=c.$;return function(c){function m(d,e){b.uet&&b.uet(d,e,{wb:1})}function e(d){if(b.ue&&"function"===typeof b.ue.count)return b.ue.count(d)||0}function d(d){b.ue&&
"function"===typeof b.ue.count&&b.ue.count(d,(b.ue.count(d)||0)+1)}function t(){if(!C){C=!0;H.hide();x.show();G.animate({height:"100%"},300);var d=0,g=0,a=0,c=parseInt(x.css("width"),10),k=x.find(".sims-img-link");k.each(function(e,b){d+=b.clientWidth;c<d?l(b).hide():(g=d,a+=1)});var u=c-g;0<u&&(u=Math.floor(20+u/a-1),20<u&&k.css({"padding-right":u/2+"px","padding-left":u/2+"px"}));k="popoverLatency"+e("freshPopOverOn");m("be",k);b.uex&&b.uex("ld",k,{wb:1})}}function q(){0===--u&&t()}function p(e,
g){var a=l("<a>"),b=l("<div>");a.attr("class","sims-img-link");b.addClass("sims-img-border");g&&a.addClass("selected");a.click(function(){d("freshPopOverSimsClick");x.find(".sims-img-link").removeClass("selected");l(this).addClass("selected");c.clear();c.setAsin(e.asin,{beforeUpdate:function(g){g=l.extend(!0,{},e);var a=e.url;if(g.loading)d("freshPopOverLoading");else{var b=(new k(g.images[0])).autoCrop().scaleXY(500,400).build(),b={url:a,image:b,actionUrl:{action:"/gp/product/handle-buy-box/"+w(a)}};
g.reviews&&(b.reviews=l.extend({},g.reviews,{url:a+"#customerReviews"}));g=l.extend({},g,b)}return g}})});return a.append(b)}function g(){l.each(z,function(d,e){e.url=e.url.replace(/ref=gw_pdb_pdt-[\d]+/,w(B)+"&gw_sims-"+d)})}function w(d){return 0<=d.indexOf("redirect.html?")?d.replace(/.*redirect.html|(token|location)=.*?&/g,""):d.substring(d.indexOf("/ref=")+1,d.length)}function r(){C=!1;g();var d=[];u=z.length>u?u:z.length;l(z).each(function(e,g){g.loading=!1;if(g.images[0].src){var a=(new k(g.images[0])).autoCrop().scaleXY(130,
100).build().src,b=l("<img>");b.attr("src",a);b.attr("class","sims-img");b.load(q);a=l("<div>");a.attr("class","sims-img-container");var c=l("<div>");c.addClass("sims-img-overlay");l(a).append(c);a.append(b);b=p(g,0===e);b.append(a);d.push(b)}return e<u-1});u=d.length;l(d).each(function(d,e){x.append(e)});setTimeout(t,D)}function y(){a.when("gw-popover").execute(function(d){d.hide()})}function A(){H.hide();G.addClass("hidden");E.bind("click",y)}function v(){x.empty();G.add(H).removeAttr("style");
G.removeClass("hidden");E.unbind("click",y);H.show();x.hide();u=8;z=[]}var u,z,B,D=1E4,C=!1,E=l("#sims-section"),G=E.find(".sims-wrapper"),H=E.find(".sims-loading"),x=E.find(".sims-details");l("#gw-asin-popover");return{fetch:function(d,g,c){m("af","popoverLatency"+e("freshPopOverOn"));v();B=g;d.url=B;z.push(d);g=f.get(d.asin);setTimeout(c.reject,D);g.sims?c.resolve(g.sims):a.when("gwAjax").execute(function(e){e("/gp/gw/ajax/pdb.html",{id:"quicklook-sims-pdb",data:{swn:"productdb-ajax",sa:'{"asins": [], "entityId":"'+
d.asin+'","datasetId": "purchase"}',oe:'{"isDesktop":1,"isTablet":0,"isMobile":0}',rrid:b.ue_id}}).done(function(e){if(e&&e.p&&0<e.p.length){var g=d.asin,a=e.p;a&&(f.get(g).sims||f.addSims(g,a));return c.resolve(e.p)}return c.reject()}).fail(c.reject)});return c},setNoSimView:A,showSims:function(e,g){var a=f.get(e);a.loading?d("freshPopOverSimLoadBeforePrimeAsin"):z=a.sims?l.merge([a],a.sims):l.merge([a],g);4<z.length?r():(d("simsLessThanThreshold"),A())},resetSimData:v,setWaitPeriod:function(d){D=
d}}}});a.when("A").execute(function(c){var k=c.$,f,l;if(!c.$("html").hasClass("a-touch"))if(b.cvox)b.ue&&b.ue.tag&&b.ue.tag("screenReaderOn");else{k("#a-page").delegate("*[data-sgproduct] #gw-quick-look-btn","click",function(a){h(a)});k("#a-page").delegate(".bestseller-list *[data-sgproduct]","click",function(a){h(a)});a.when("gw-popover").execute(function(a){f=a;k("#gw-popover-close").click(function(){f.hide()});l&&f.show.apply(f,l)});var h=function(a){if(!(1<a.which||a.shiftKey||a.altKey||
a.metaKey||a.ctrlKey)){var e,d;k(a.target).parents(".bestseller-list").length?(e=k(a.currentTarget).data("sgproduct"),d=k(a.target).closest("a").attr("href")):(e=k("#gw-quick-look-btn").closest("*[data-sgproduct]").data("sgproduct"),d=k("#gw-quick-look-btn").siblings().children("a").attr("href"));var b=[e.asin,d];e.asin&&d&&(a.preventDefault(),f?f.show.apply(f,b):l=b)}}}});a.when("A","sg-jsutil","dombinder").register("productdb-binding-helper",function(a,b,f){return function(a,c){function m(d,
e){f.update(g,t(e.beforeUpdate,d));d.loading||t(e.load,d)}function e(e){d();p=function(){e(q)};q.pdb_observe(p)}function d(){q&&p&&(q.pdb_unobserve(p),p=null)}var t=b.safeCall,q=null,p=null,g=f.init(c);this.setAsin=function(g,b){b=b||{};d();q=a.get(g);m(q,b);q.loading&&e(function(d){m(d,b)});return q};this.clear=function(){d();q={};f.update(g,q)}}});b.P&&a.when("jQuery","afterLoad").register("gw-resource-logger",function(a){return{instrumentResources:function(k){var f;f=!1;if(a.isArray(k)&&!a.isEmptyObject(k)){f=
!0;for(var l=0;l<k.length;l++){var h=k[l];if("id"in h&&"regex"in h&&"initiator"in h){if(!("string"===typeof h.id&&"string"===typeof h.initiator&&h.regex instanceof RegExp)){f=!1;break}}else{f=!1;break}}}l=b.performance&&"function"===typeof b.performance.getEntriesByType&&"undefined"!==typeof b.performance.getEntriesByType("resource")&&"undefined"!==typeof b.ue;if(f&&l){f=Array(k.length);for(l=0;l<f.length;l++)f[l]=!1;for(h=l=0;h<b.performance.getEntriesByType("resource").length&&l<k.length;h++)for(var m=
b.performance.getEntriesByType("resource")[h],e=m.name,d=m.initiatorType,t=0;t<k.length;t++)if(!f[t]){var q=k[t].regex;if(d===k[t].initiator&&q.test(e)){e=k[t].id;d=m;m=d.duration;b.ue.count&&(b.ue.count(e+":duration",m),b.ue.count(e+":startTime",d.startTime));b.ue.tag&&(d=void 0,d=50>m?e+":cached":e+":notCached",b.ue.tag(d));f[t]=!0;l++;break}}}}}});a.register("sg-media-builder",function(){return function(a){var b=this,f=a.src,l=[];b.build=function(){var b=l.join("_");return{src:f.replace(/\.([^.]+)$/,
"._"+b+"_.$1"),alt:a.alt}};b.autoCrop=function(){l.push("AC");return b};b.scaleX=function(a){l.push("SX"+a);return b};b.scaleY=function(a){l.push("SY"+a);return b};b.upScaleX=function(a){l.push("UX"+a);return b};b.upScaleY=function(a){l.push("UY"+a);return b};b.scaleXY=function(a,c){return b.upScaleX(a).scaleY(c)}}});a.when("A","gwAjax").register("shogunProductDB",function(a,k){function f(b){var e=[];h[b]={loading:!0,pdb_observe:function(d){e.push(d)},pdb_unobserve:function(d){e=a.$.grep(e,
function(e){return e!==d})},_trigger:function(){a.$.each(e,function(){this.call(h[b])})}};return h[b]}function l(m,e){this.ajaxUrl=m;this.experienceStr=e;this._add=function(d){d.p&&a.$.each(d.p,function(d,e){if(e.asin){var b=h[e.asin]||f(e.asin);a.$.extend(b,e,{loading:!1,error:!1});b._trigger(e)}})};this.addSims=function(d,e){if(e){var b=h[d]||f(d);a.$.extend(b,{sims:e});b._trigger(d)}};this._ajax=function(d,t){var h=a.$.extend(!0,{},m,{params:{sa:JSON.stringify(d),oe:e}});b.ue_sid&&(h.url+="/"+
b.ue_sid);b.ue_id&&(h.params.rrid=b.ue_id);return k(h.url,{method:h.method,params:h.params,success:t.success,error:t.error,id:"gw-jslibs-"+t.id})};this.get=function(d){return d in h?h[d]:f(d)}}var h={};return function(a,e){return new l(a,e)}});a.when("jQuery","p-detect").register("component-feed-carousel",function(c,k){var n=c.extend(!0,{},k);c.each({pointerPrefix:function(){return"onmspointerup"in document||"onpointerup"in document?"onpointerup"in document?"pointer":"MSPointer":!1},
actionMode:function(){var a=n.capabilities.pointerPrefix;return a?a:n.capabilities.touch?"touch":"mouse"}},function(a,e){n.capabilities[a]=e()});var l={};c.each({start:{mouse:"down",touch:"start",pointer:"down",MSPointer:"Down"},end:{mouse:"up",touch:"end",pointer:"up",MSPointer:"Up"}},function(a,e){var d=n.capabilities.actionMode,b="string"===typeof e?e:e[d];l[a]=b?d+b:e.mouse===f?"":"mouse"+e.mouse});n.action=l;var h=function(a,e,d,b){this.init(a,e,d,b)};h.prototype={init:function(k,e,d,t){var h=
this;c("html").hasClass("a-touch")&&k.addClass("feed-carousel-touch");h.adjustMarginOnChange=!0;h.defaultCssRightMargin=null;h.minItems=e||10;h.imgClass=".product-image";h.config=t||{};h.$carousel=k;h.cfMinItems=d||6;h.cfFired=!1;h.shovelerReadyFired=!1;h.slotId=h.getSlotId();h.touch=h.$carousel.hasClass("feed-carousel-touch");h.ajaxSource=h.$carousel.parent().hasClass("ajaxSource");h.$shelf=h.$carousel.find(".feed-carousel-shelf");h.$viewport=h.$carousel.find(".feed-carousel-viewport");h.$spinner=
h.$carousel.find(".spinner");h.$left=c(".feed-carousel-control.feed-left",k);h.$right=c(".feed-carousel-control.feed-right",k);h.$buttons=c(".feed-carousel-control",k);h.$thumb=c(".feed-scrollbar-thumb",k);h.shelfLeft=-1*parseInt(h.$shelf.css("left"),10);h.calcWidth=c("html").hasClass("a-lt-ie9");h.noOpacity=c("html").hasClass("a-lt-ie9");h.uniqueId=h.getUniqueId();h.$left.attr("aria-hidden",!0);h.$right.attr("aria-hidden",!0);h.bindEvents();h.$carousel.data("Carousel",h);h.$carousel.trigger("change");
h.token=!1;h.lock=function(){h.token=!0};h.unlock=function(){h.token=!1};h.locked=function(){return h.token};a.when("gw-first-carousel").execute(function(){h.first=h.$carousel.hasClass("first-carousel");h.shouldControlsOn()?h.showControls():h.hideControls()});h.uniqueId&&a.when(h.uniqueId).execute(function(d){h.appendCards(d.cards);if(d.cards&&h.slotId&&"object"===typeof b.ue&&"function"===typeof b.ue.count){var e="gw-"+h.slotId.toString()+"-lazy-cards",a="gw-"+h.slotId.toString()+"-lazy";b.ue.count(e,
(b.ue.count(e)||0)+d.cards.length);b.ue.count(a,(b.ue.count(a)||0)+1)}})},getUniqueId:function(){if(this.$viewport){var a=this.$viewport.closest(".shogun-widget");return 0<a.length?c(a[0]).attr("id"):null}},getSlotId:function(){var a=this.$carousel.closest(".gw-widget-instrument");return 0<a.length?c(a[0]).attr("id"):null},bindEvents:function(){function a(d){return n.capabilities.pointerPrefix&&-1<c.inArray(d.originalEvent.pointerType,[2,"touch"])||"touch"===n.capabilities.actionMode}var e=this,d=
c("body");e.$buttons.ready(function(d){e.shovelerReadyFired||(e.slotId&&(d=e.slotId.toString()+"-active",b.GWI&&b.GWI.recordLatency(d),b.GWI&&b.GWI.register(d)),e.shovelerReadyFired=!0)});e.$carousel.change(function(d){e.updateItems();e.updateSpinner();e.updateShelf();e.updateControls();null===e.defaultCssRightMargin&&e.$shelf.children("li").first()&&(e.defaultCssRightMargin=parseInt(e.$shelf.children("li").first().css("margin-right"),10));e.adjustMarginOnChange&&e.adjustCardMargin()});e.$left.click(function(d){d.preventDefault();
e.changePage(-1);e.slotId&&e.logCounter("gw-"+e.slotId.toString()+"-left")});e.$right.click(function(d){d.preventDefault();e.changePage(1);e.slotId&&e.logCounter("gw-"+e.slotId.toString()+"-right")});e.bindImageLoadEvents(e.$shelf);var k;c(b).resize(function(){clearTimeout(k);k=setTimeout(function(){var d=e.getDimensions(),d=Math.max(Math.min(d.shelfLeft,d.maxLeft),0);e.moveShelf(d)},100)});e.$thumb.mousedown(function(a){var b=a.clientX;1===a.which&&(a.preventDefault(),e.$carousel.addClass("scrolling"),
d.bind("mousemove.feed-carousel",function(d){var a=e.getDimensions(),a=Math.max(Math.min(a.shelfLeft+1/a.pageRatio*(d.clientX-b),a.maxLeft),0);b=d.clientX;e.moveShelf(a)}),c(document).bind("selectstart.feed-carousel",function(){return!1}))});d.add(b).mouseup(function(a){e.$carousel.removeClass("scrolling");e.$carousel.hasClass("hovering")||e.hideControls();d.unbind("mousemove.feed-carousel");c(document).unbind("selectstart.feed-carousel")});e.$carousel.hover(function(){e.$carousel.addClass("hovering");
clearTimeout(e.hoverTimer);e.hoverTimer=setTimeout(function(){e.$carousel.hasClass("hovering")&&!e.$carousel.hasClass("touching")?e.showControls():e.$carousel.removeClass("touching")},300)},function(){e.$carousel.removeClass("hovering touching");clearTimeout(e.hoverTimer);e.$carousel.hasClass("scrolling")||(e.hoverTimer=setTimeout(function(){e.$carousel.hasClass("hovering")||e.hideControls()},600))});e.$carousel.bind(n.action.start,function(d){a(d)&&(e.$carousel.addClass("touching"),clearTimeout(e.touchTimer),
e.touchTimer=setTimeout(function(){e.$carousel.removeClass("touching")},5E3))});e.$carousel.bind(n.action.end,function(d){a(d)&&(e.$carousel.removeClass("touching"),clearTimeout(e.touchTimer),clearTimeout(e.hoverTimer))});e.$viewport.scroll(function(){e.shelfLeft=e.$viewport.scrollLeft();e.updateControls()})},bindImageLoadEvents:function(a){var e=this;c(e.imgClass,a).one("load",function(){e.$carousel.trigger("change")})},getDimensions:function(){var a=this.$shelf.width(),e=this.shelfLeft,d=this.$carousel.width();
return{pageWidth:d,shelfWidth:a,shelfLeft:e,pageRatio:d/a,leftRatio:e/a,maxLeft:a-d}},updateItems:function(){var a=this,e=a.$shelf.find(".feed-carousel-card"),d=function(d){return"none"===d.css("display")};e.each(function(e,k){var h=c(k);if(!d(h)&&!a.config.visibleBeforeLoad)return!0;h.attr("aria-posinset",e+1);h.attr("aria-hidden",!1);h.attr("role","listitem");return 0>=h.find(a.imgClass).filter(function(){return!this.complete}).length?(h.css("display","inline-block"),e+1>=a.cfMinItems&&!a.cfFired&&
(a.slotId&&(h=a.slotId.toString()+"-visible",b.GWI&&b.GWI.recordLatency(h),b.GWI&&b.GWI.register(h)),a.cfFired=!0),!0):!1});e.attr("aria-setsize",e.size());a.$items=e.filter(function(){return!d(c(this))})},updateShelf:function(){var a=0;this.calcWidth&&(this.$shelf.children().each(function(){a+=c(this).outerWidth(!0)}),this.$shelf.width(a));this.touch&&this.$carousel.not(".fresh-shoveler-tablet-app .feed-carousel").height(this.$shelf.outerHeight(!0))},updateSpinner:function(){this.size()<this.minItems&&
this.ajaxSource?this.$spinner.show():(this.size()<this.minItems&&"object"===typeof b.ue&&"function"===typeof b.ue.count&&b.ue.count("shovelerNotEnoughItem",(b.ue.count("shovelerNotEnoughItem")||0)+1),this.$spinner.hide())},updateControls:function(){this.updateArrows();this.updateScrollThumb()},shouldControlsOn:function(){return this.first&&!this.touch},showControls:function(a){this.$thumb.add(this.$buttons).stop(!0,!0).fadeIn({duration:300,complete:a,queue:!1})},hideControls:function(a){var e=this.$thumb;
this.shouldControlsOn()||(e=e.add(this.$buttons));e.stop(!0,!0).fadeOut({duration:300,complete:a,queue:!1})},appendCards:function(a){this.$shelf.append(a);this.bindImageLoadEvents(a);this.$carousel.trigger("change")},updateArrows:function(){var a=this,e=a.getDimensions();c.each([{$e:a.$left,enabled:0<e.shelfLeft},{$e:a.$right,enabled:e.shelfLeft<e.maxLeft}],function(d,e){var b=e.$e;e.enabled?b.removeClass("feed-control-disabled"):b.addClass("feed-control-disabled");a.noOpacity&&(e.enabled?b.css("opacity",
"1"):b.css("opacity","0.5"))})},updateScrollThumb:function(){var a=this.getDimensions(),e=a.leftRatio*a.pageWidth,a=Math.min(a.pageRatio*a.pageWidth,a.pageWidth);this.$thumb.width(a).each(function(){c(this).animate({left:e},0)})},logCounter:function(a){"object"===typeof b.ue&&"function"===typeof b.ue.count&&(b.ue.count(a,(b.ue.count(a)||0)+1),b.ue.count("gw-shoveler-click",1))},changePage:function(a){var e=this.getDimensions(),d=this.alignWithItem(e.shelfLeft+a*e.pageWidth),d=Math.min(0>a?d.right:
d.left,e.maxLeft);this.locked()||(this.lock(),e.shelfLeft===d?(this.bounce(this.$shelf,-30*a),this.bounce(this.$thumb,6*a)):this.moveShelf(d,400))},moveShelf:function(a,e){function d(){b.updateArrows();b.unlock()}var b=this;e=e||0;b.shelfLeft=a;if(b.touch)b.$viewport.animate({scrollLeft:a},e,"swing",d);else{var c=b.getDimensions(),c=a/c.shelfWidth*c.pageWidth;b.$shelf.animate({left:-a},e,"swing",d);b.$thumb.animate({left:c},e,"swing",function(){b.updateScrollThumb();b.unlock()})}},getItems:function(){return this.$items},
size:function(){return this.getItems().length},alignWithItem:function(a){if(0>a)return{left:0,right:0};var e=this,d=e.getItems(),b=d.map(function(){var d=e.cardPosition(c(this));if(a>=d.left&&a<=d.right)return d}).get(0);return b?b:e.cardPosition(d.last())},cardPosition:function(a){var e=(a.position()||{left:0,right:0}).left;a=e+a.outerWidth(!0);return{left:e,right:a}},bounce:function(a,e){function d(d){var a={};a[b.touch?"left":"marginLeft"]=d;return a}var b=this;a.each(function(){var a=c(this);
a.animate(d(e),400,"swing",function(){a.animate(d(0),100,"swing",b.unlock)})})},setCardMargin:function(a){this.$shelf.children("li").first()&&this.$shelf.children("li").first().css("margin-right")!==a+"px"&&(this.$shelf.children("li").css("margin-right",a+"px"),this.updateShelf())},adjustCardMargin:function(a){a=a===f||null===a?this.defaultCssRightMargin:a;this.setCardMargin(a);var e=this.getDimensions(),e=0>e.maxLeft?Math.ceil(-e.maxLeft/this.size()):a;this.setCardMargin(e<a?a:e)}};return{createCarousel:function(a,
e,d,b){c(a).each(function(a,k){var g=c(k);new h(g,e,d,b)})}}});a.when("jQuery","SafeP").execute("shoveler-lazy-non-visible-images",function(c,k){function f(a){"object"===typeof h.ue&&"function"===typeof h.ue.count&&h.ue.count(a,(h.ue.count(a)||0)+1)}function l(){h.GWData&&c.each(h.GWData,function(a,e){if(a&&e&&e.data&&!e.loaded){e.loaded=!0;f("gw-lazy-load-all");var d=[];c.each(e.data,function(a,e){d.push(c(e)[0])});d&&0<d.length&&f("gw-lazy-load-non-empty");k&&k.register(a,function(){return{cards:d}})}})}
var h=b;a.when("x1").execute(l);a.when("ready").execute(l);a.when("load").execute(l)});a.register("SafeP",function(){var b={};return{register:function(k,f){"string"===typeof k&&"function"===typeof f&&(b[k]||(b[k]=function(k,h){a.register(k,h);b[k]=function(){}}),b[k]&&b[k](k,f))}}});a.when("A").register("resizeable-inline-video",function(c){function k(a,e){"function"===typeof h.uet&&e&&h.uet(a,e,{wb:1})}function f(a,e){"function"===typeof h.uex&&e&&h.uex(a,e,{wb:1})}var l=
c.$,h=b;return function(b,e,d){function t(){D.removeClass("player-uncommenced viewport-loaded").addClass("viewport-loading player-loading");v.css("z-index",1).css("opacity",1);k("tc","airyInlineVideoLoadingMonitor");k("tc",d.loadingScope);k("bb","airyInlineVideoPlaybackMonitor");k("bb",d.playbackScope)}function q(d){d=d||{};return{play:d.play||C,stop:d.stop||C,resize:d.resize||C,airyReady:d.airyReady||C}}function p(){return new q({airyReady:function(d){t();E=new w(d);E.play()},stop:function(){var d;
d=C;A.removeClass("viewport-loading").addClass("viewport-loaded");v.css("z-index",-1).css("opacity",0);z.length&&u.hide();d()}})}function g(d){return new q({play:function(){E=new w(d);u.fadeOut(1E3,function(){u.css("display","block");u.css("visibility","hidden");t();E.play()})}})}function w(a){return new q({play:function(){B.removeClass("viewport-loading").addClass("viewport-loaded");D.removeClass("player-loading");k("be","airyInlineVideoLoadingMonitor");k("be",d.loadingScope);f("ld","airyInlineVideoLoadingMonitor");
f("ld",d.loadingScope);E=new r(a)}})}function r(d){return new q({stop:function(){E=new y(d);d.pause()}})}function y(d){return new q({})}var A=l(b),v=A.find(".airy-video-container"),u=A.find(".image-map-before"),z=A.find(".image-map-after"),B=A.find(".airy-video-viewport-in"),D=A.add(B),C=function(){},E;d=d||{};k("bb","airyInlineVideoLoadingMonitor");k("bb",d.loadingScope);E=new function(b){function c(a){function g(d){"object"===typeof h.ue&&"function"===typeof h.ue.count&&h.ue.count(d,(h.ue.count(d)||
0)+1)}e.bindings={loadedmetadata:function(a,e){E.airyReady(b);k("cf","airyInlineVideoLoadingMonitor");k("cf",d.loadingScope)},videounsupportederror:function(d,a){g("airyResizableInlineVideoUnsupportedError")},decodeerror:function(d,a){g("airyResizableInlineVideoDecodeError")},networkerror:function(d,a){g("airyResizableInlineVideoNetworkError")},undefinederror:function(d,a){g("airyResizableInlineVideoUndefinedError")},beganplaying:function(){E.play()},ended:function(){k("af","airyInlineVideoPlaybackMonitor");
k("af",d.playbackScope);E.stop()}};var b=a.embed(e);d.autoPlay&&b.play({isAsync:!0})}b=b||{};a.load.js(b.js||"");a.load.css(b.css||"");D.addClass("player-uncommenced");d.whenReady?a.when("Airy","ready").execute(c):a.when("Airy").execute(c);return new q({airyReady:function(d){E=new g(d);E.play()},play:function(){E=new p}})}(d.airyAssetUrls);(function(){c.on("resize",function(){E.resize()})})()}})});